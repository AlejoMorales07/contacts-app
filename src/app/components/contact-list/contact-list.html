<div class="contact-list-container">
  <div class="search-container">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Buscar contactos...</mat-label>
      <input
        matInput
        [(ngModel)]="searchTerm"
        (input)="searchContacts()"
        placeholder="Nombre, teléfono o email"
      />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  @if (contacts.length === 0) {
  <div class="no-contacts">
    <mat-icon>contact_phone</mat-icon>
    <h3>No hay contactos</h3>
    <p>Agrega tu primer contacto usando el botón "Agregar"</p>
  </div>
  } @if (contacts.length > 0 && filteredContacts.length === 0) {
  <div class="no-results">
    <mat-icon>search_off</mat-icon>
    <h3>Sin resultados</h3>
    <p>No se encontraron contactos con el término "{{ searchTerm }}"</p>
  </div>
  } @if (filteredContacts.length > 0) {
  <div class="contacts-grid">
    @for (contact of filteredContacts; track contact.id) {
    <mat-card class="contact-card">
      <mat-card-header>
        <div mat-card-avatar class="contact-avatar">
          {{ contact.name.charAt(0).toUpperCase() }}
        </div>
        <mat-card-title>{{ contact.name }}</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="contact-info">
          <div class="info-row">
            <mat-icon>phone</mat-icon>
            <span>{{ contact.phone }}</span>
          </div>
          @if (contact.email) {
          <div class="info-row">
            <mat-icon>email</mat-icon>
            <span>{{ contact.email }}</span>
          </div>
          }
        </div>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-button color="warn" (click)="deleteContact(contact.id)">
          <mat-icon>delete</mat-icon>
          Eliminar
        </button>
      </mat-card-actions>
    </mat-card>
    }
  </div>
  } @if (contacts.length > 0) {
  <div class="contact-counter">
    <p>Mostrando {{ filteredContacts.length }} de {{ contacts.length }} contactos</p>
  </div>
  }
</div>
